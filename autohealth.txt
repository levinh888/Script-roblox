-- âš™ï¸ Biáº¿n toggle
local AutoBangGac = false
local CanUseBandage = true -- chá»‘ng spam

-- ğŸ©¹ Toggle báº­t táº¯t auto bÄƒng gáº¡c
Tab:AddToggle("AutoBangGac", {
    Title = "ğŸ’‰ Auto BÄƒng Gáº¡c (HP < 80)",
    Default = false,
    Callback = function(state)
        AutoBangGac = state
        Fluent:Notify({
            Title = "ğŸ’‰ Auto BÄƒng Gáº¡c",
            Content = state and "ÄÃ£ báº­t tá»± há»“i mÃ¡u khi HP < 40." or "ÄÃ£ táº¯t tá»± há»“i mÃ¡u.",
            Duration = 3
        })
    end
})

-- ğŸ“¦ Láº¥y láº¡i bÄƒng gáº¡c náº¿u máº¥t
local function GetBackpack(itemName)
    local success, err = pcall(function()
        local Knit = game:GetService("ReplicatedStorage"):WaitForChild("KnitPackages")
            :WaitForChild("_Index"):WaitForChild("sleitnick_knit@1.7.0")
            :WaitForChild("knit")
        local RE = Knit.Services.InventoryService.RE.updateInventory

        RE:FireServer("refresh")
        task.wait(1)
        RE:FireServer("eue", itemName)
    end)
    if not success then
        warn("âŒ Lá»—i khi láº¥y láº¡i bÄƒng gáº¡c:", err)
    end
end

-- â¤ï¸ VÃ²ng láº·p kiá»ƒm tra mÃ¡u vÃ  tá»± dÃ¹ng bÄƒng
spawn(function()
    while task.wait(1) do
        if AutoBangGac and CanUseBandage then
            local char = game.Players.LocalPlayer.Character
            local humanoid = char and char:FindFirstChild("Humanoid")
            local backpack = game.Players.LocalPlayer:FindFirstChild("Backpack")

            if humanoid and humanoid.Health < 80 then
                CanUseBandage = false -- khÃ³a spam trong vÃ i giÃ¢y

                -- Láº¥y bÄƒng náº¿u chÆ°a cÃ³
                if not backpack:FindFirstChild("bÄƒng gáº¡c") then
                    GetBackpack("bÄƒng gáº¡c")
                    task.wait(1.5)
                end

                -- DÃ¹ng bÄƒng gáº¡c náº¿u cÃ³
                if backpack:FindFirstChild("bÄƒng gáº¡c") then
                    local tool = backpack:FindFirstChild("bÄƒng gáº¡c")
                    pcall(function()
                        tool.Parent = char
                        task.wait(0.5)
                        humanoid:EquipTool(tool)
                        task.wait(0.5)
                        tool:Activate()
                    end)
                end

                -- Chá» cho há»“i mÃ¡u Ã­t nháº¥t lÃªn 70 rá»“i má»›i cho dÃ¹ng tiáº¿p
                repeat task.wait(1) until humanoid.Health > 100 or not AutoBangGac
                task.wait(2)
                CanUseBandage = true
            end
        end
    end
end)